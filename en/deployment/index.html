
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://awslabs.github.io/data-transfer-hub/deployment/">
      
      <link rel="icon" href="../images/aws-solutions.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.3">
    
    
      
        <title>Automated deployment - Data Transfer Hub</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.edf004c2.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deployment-overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Data Transfer Hub" class="md-header__button md-logo" aria-label="Data Transfer Hub" data-md-component="logo">
      
  <img src="../images/aws-solutions.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Data Transfer Hub
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Automated deployment
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="/data-transfer-hub/en/" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/data-transfer-hub/zh/" hreflang="zh-CN" class="md-select__link">
                    简体中文
                  </a>
                </li>
                
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/awslabs/data-transfer-hub/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Data Transfer Hub" class="md-nav__button md-logo" aria-label="Data Transfer Hub" data-md-component="logo">
      
  <img src="../images/aws-solutions.png" alt="logo">

    </a>
    Data Transfer Hub
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/awslabs/data-transfer-hub/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Welcome
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../cost/" class="md-nav__link">
        Cost
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../architecture/" class="md-nav__link">
        Architecture overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../solution-components/" class="md-nav__link">
        Solution components
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../security/" class="md-nav__link">
        Security
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../regions/" class="md-nav__link">
        Supported regions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../template/" class="md-nav__link">
        CloudFormation template
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Automated deployment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Automated deployment
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deployment-overview" class="md-nav__link">
    Deployment overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-option-1-launch-the-stack-in-aws-standard-regions" class="md-nav__link">
    Step 1. (Option 1) Launch the stack in AWS Standard Regions 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-option-2-launch-the-stack-in-aws-china-regions" class="md-nav__link">
    Step 1. (Option 2) Launch the stack in AWS China Regions 
  </a>
  
    <nav class="md-nav" aria-label="Step 1. (Option 2) Launch the stack in AWS China Regions ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisite-1-create-an-oidc-user-pool" class="md-nav__link">
    Prerequisite 1: Create an OIDC user pool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisite-2-configure-domain-name-service-resolution" class="md-nav__link">
    Prerequisite 2: Configure domain name service resolution
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-launch-the-web-console" class="md-nav__link">
    Step 2. Launch the web console 
  </a>
  
    <nav class="md-nav" aria-label="Step 2. Launch the web console ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-log-in-using-amazon-cognito-user-pool-for-aws-standard-regions" class="md-nav__link">
    (Option 1) Log in using Amazon Cognito user pool for AWS Standard Regions 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-openid-authentication-for-aws-china-regions" class="md-nav__link">
    (Option 2) OpenID authentication for AWS China Regions 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-create-a-transfer-task" class="md-nav__link">
    Step 3. Create a transfer task 
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-s3/" class="md-nav__link">
        Create Amazon S3 transfer task
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-ecr/" class="md-nav__link">
        Create Amazon ECR transfer task
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Tutorials
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tutorials" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Tutorials
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-oss/" class="md-nav__link">
        Transfer S3 object from Alibaba Cloud OSS
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial-directconnect/" class="md-nav__link">
        Transfer S3 object via Direct Connect
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../additional-resources/" class="md-nav__link">
        Additional resources
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../uninstall/" class="md-nav__link">
        Uninstall the solution
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        FAQ
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../source/" class="md-nav__link">
        Source code
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../revisions/" class="md-nav__link">
        Revisions
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#deployment-overview" class="md-nav__link">
    Deployment overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-option-1-launch-the-stack-in-aws-standard-regions" class="md-nav__link">
    Step 1. (Option 1) Launch the stack in AWS Standard Regions 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-1-option-2-launch-the-stack-in-aws-china-regions" class="md-nav__link">
    Step 1. (Option 2) Launch the stack in AWS China Regions 
  </a>
  
    <nav class="md-nav" aria-label="Step 1. (Option 2) Launch the stack in AWS China Regions ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    Prerequisites
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisite-1-create-an-oidc-user-pool" class="md-nav__link">
    Prerequisite 1: Create an OIDC user pool
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisite-2-configure-domain-name-service-resolution" class="md-nav__link">
    Prerequisite 2: Configure domain name service resolution
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-2-launch-the-web-console" class="md-nav__link">
    Step 2. Launch the web console 
  </a>
  
    <nav class="md-nav" aria-label="Step 2. Launch the web console ">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#option-1-log-in-using-amazon-cognito-user-pool-for-aws-standard-regions" class="md-nav__link">
    (Option 1) Log in using Amazon Cognito user pool for AWS Standard Regions 
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-2-openid-authentication-for-aws-china-regions" class="md-nav__link">
    (Option 2) OpenID authentication for AWS China Regions 
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-3-create-a-transfer-task" class="md-nav__link">
    Step 3. Create a transfer task 
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/awslabs/data-transfer-hub/edit/master/docs/deployment.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>


  <h1>Automated deployment</h1>

<p>Before you launch the solution, review the cost, architecture, network security, and other considerations discussed in this guide. Follow the step-by-step instructions in this section to configure and deploy the solution into your account.</p>
<p><strong>Time to deploy</strong>: Approximately 15 minutes</p>
<h2 id="deployment-overview">Deployment overview</h2>
<p>Use the following steps to deploy this solution on AWS. For detailed instructions, follow the links for each step.</p>
<ul>
<li>Step 1. Launch the stack<ul>
<li><a href="#launch-cognito">(Option 1) Deploy the AWS CloudFormation template in AWS Standard Regions</a></li>
<li><a href="#launch-openid">(Option 2) Deploy the AWS CloudFormation template in AWS China Regions</a></li>
</ul>
</li>
<li>Step 2. <a href="#launch-web-console">Launch the web console</a></li>
<li>Step 3. <a href="#create-task">Create a transfer task</a></li>
</ul>
<h2 id="step-1-option-1-launch-the-stack-in-aws-standard-regions">Step 1. (Option 1) Launch the stack in AWS Standard Regions <a name="launch-cognito"></a></h2>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>The following deployment instructions apply to AWS Standard Regions only. For deployment in AWS China Regions refer to Option 2.  </p>
</div>
<p><strong>Deploy the AWS CloudFormation template for Option 1 – AWS Standard Regions</strong></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You are responsible for the cost of the AWS services used while running this solution. For more details, visit the Cost section in this guide, and refer to the pricing webpage for each AWS service used in this solution. </p>
</div>
<ol>
<li>
<p>Sign in to the AWS Management Console and select the button to launch the <code>DataTransferHub-cognito.template</code> AWS CloudFormation template. Alternatively, you can <a href="https://aws-gcr-solutions.s3.amazonaws.com/data-transfer-hub/latest/DataTransferHub-cognito.template">download the template</a> as a starting point for your own implementation.</p>
<p><a href="https://console.aws.amazon.com/cloudformation/home#/stacks/create/template?stackName=DataTransferHub&amp;templateURL=https://aws-gcr-solutions.s3.amazonaws.com/data-transfer-hub/latest/DataTransferHub-cognito.template"><img alt="Launch Stack" src="../images/launch-stack.png" /></a></p>
</li>
<li>
<p>The template launches in the US East (N. Virginia) Region by default. To launch the solution in a different AWS Region, use the Region selector in the console navigation bar. </p>
</li>
<li>
<p>On the <strong>Create stack</strong> page, verify that the correct template URL is in the <strong>Amazon S3 URL</strong> text box and choose <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Specify stack details</strong> page, assign a name to your solution stack. For information about naming character limitations, refer to <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-limits.html">IAM and STS Limits</a> in the <em>AWS Identity and Access Management User Guide</em>.</p>
</li>
<li>
<p>Under <strong>Parameters</strong>, review the parameters for this solution template and modify them as necessary. This solution uses the following default values.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>AdminEmail</strong></td>
<td>&lt;Requires input></td>
<td>The email of the Admin user.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Choose <strong>Next</strong>. </p>
</li>
<li>
<p>On the <strong>Configure Stack Options</strong> page, keep the default values and choose <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Review</strong> page, review and confirm the settings. Check the box acknowledging that the template will create AWS Identity and Access Management (IAM) resources.</p>
</li>
<li>
<p>Choose <strong>Create stack</strong> to deploy the stack.</p>
</li>
</ol>
<p>You can view the status of the stack in the AWS CloudFormation console in the <strong>Status</strong> column. You should receive a <strong>CREATE_COMPLETE</strong> status in approximately 15 minutes.</p>
<h2 id="step-1-option-2-launch-the-stack-in-aws-china-regions">Step 1. (Option 2) Launch the stack in AWS China Regions <a name="launch-openid"></a></h2>
<div class="admonition warning">
<p class="admonition-title">Important</p>
<p>The following deployment instructions apply to AWS China Regions only. For deployment in AWS Standard Regions refer to Option 1.  </p>
</div>
<h3 id="prerequisites">Prerequisites</h3>
<ol>
<li>Create an OIDC User Pool. </li>
<li>Configure domain name service (DNS) resolution.</li>
</ol>
<h3 id="prerequisite-1-create-an-oidc-user-pool">Prerequisite 1: Create an OIDC user pool</h3>
<p>In AWS Regions where Amazon Cognito is not yet available, you can use OIDC to provide authentication. The following procedure uses AWS Partner <a href="https://www.authing.cn/">Authing</a> as an example, but you can also choose any available provider. </p>
<ol>
<li>
<p>Sign up for an Authing developer account. For more information, see <a href="https://docs.authing.cn/v2/">How to register an account</a>.</p>
</li>
<li>
<p>Sign in to Authing.</p>
</li>
<li>
<p>Select <strong>Create new user pool</strong>, enter a name, and choose <strong>Confirm</strong>.</p>
</li>
<li>
<p>After the user pool is created, you can then create an application for OIDC authentication. </p>
<ol>
<li>Select and enter the <strong>App</strong> interface from the left sidebar, and select <strong>Add App</strong>.</li>
<li>Select <strong>Self-built application</strong>.</li>
<li>Enter the application name and enter the authentication address.</li>
<li>Select <strong>Create</strong>.</li>
</ol>
</li>
<li>
<p>Update the authorization configuration.</p>
<ol>
<li>Select from the left sidebar and enter the <strong>Applicable Order</strong> interface, select <strong>App Configuration</strong>, and then select <strong>Authorized Configuration</strong>.</li>
<li><strong>Authorization mode</strong> select <strong>implicit</strong>, return type select <strong>id_token</strong>.</li>
<li>The id_token signature algorithm is modified to <strong>RS256</strong>.</li>
<li>Select <strong>Save</strong>.</li>
</ol>
</li>
<li>
<p>Update the callback URL.</p>
<ol>
<li>From <strong>Application</strong>, select <strong>Configuration</strong>, then choose <strong>Auth Config</strong>. </li>
<li>Modify the login callback URL to <code>https://&lt;your-custom-domain&gt;/authentication/callback</code>。</li>
<li>Choose <strong>Save</strong>.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Verify that the domain name has completed ICP registration in China. </p>
</div>
</li>
<li>
<p>Update login control.</p>
<ol>
<li>Select and enter the <strong>Application</strong> interface from the left sidebar, select <strong>Login Control</strong>, and then select <strong>Registration and Login</strong>.</li>
<li>Please select only <strong>Password Login: Email</strong> for the login method.</li>
<li>Please <strong>uncheck</strong> all options in the registration method.</li>
<li>Select <strong>Save</strong>.</li>
</ol>
</li>
<li>
<p>Create an admin user.</p>
<ol>
<li>From <strong>Users &amp; Roles</strong>, select <strong>Users</strong>, then choose <strong>Create user</strong>.</li>
<li>Enter the email for the user. </li>
<li>Choose <strong>OK</strong>. </li>
<li>Check the email for a temporary password. </li>
<li>Reset the user password.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because this solution does not support application roles, all the users will receive admin rights. </p>
</div>
</li>
</ol>
<h3 id="prerequisite-2-configure-domain-name-service-resolution">Prerequisite 2: Configure domain name service resolution</h3>
<p>Configure domain name service (DNS) resolution to point the ICP licensed domain to the CloudFront default domain name. Optionally, you can use your own DNS resolver. </p>
<p>The following is an example for configuring an Amazon Route 53.</p>
<ol>
<li>
<p>Create a hosted zone in Amazon Route 53. For more information, refer to the <a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/Welcome.html">Amazon Route 53 Developer Guide</a>.</p>
</li>
<li>
<p>Create a CNAME record for the console URL.</p>
<ol>
<li>From the hosted zone, choose <strong>Create Record</strong>.</li>
<li>In the <strong>Record name</strong> input box, enter the host name.</li>
<li>From <strong>Record type</strong> select <strong>CNAME</strong>.</li>
<li>In the value field, Enter the CloudFormation output PortalUrl. </li>
<li>Select <strong>Create records</strong>.</li>
</ol>
</li>
<li>
<p>Add alternative domain names to the CloudFront distribution.</p>
<ol>
<li>Configure the corresponding domain name in CloudFront to open the CloudFront console by finding the distribution ID for PortalURL in the list and selecting <strong>ID</strong> (or check the check box, and then select <strong>Distribution Settings</strong>).</li>
<li>Click <strong>Edit</strong>, and add the record of Route 53 in the previous step to the <code>Alternate Domain Name (CNAME)</code>.</li>
</ol>
</li>
</ol>
<p><strong>Deploy the AWS CloudFormation template for Option 2 – AWS China Regions</strong></p>
<p>This automated AWS CloudFormation template deploys Data Transfer Hub in the AWS Cloud. You must Create an ODIC User Pool and Configure DNS resolution before launching the stack.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You are responsible for the cost of the AWS services used while running this solution. For more details, visit the Cost section in this guide, and refer to the pricing webpage for each AWS service used in this solution. </p>
</div>
<ol>
<li>
<p>Sign in to the AWS Management Console and select the button to launch the <code>DataTransferHub-openid.template</code> AWS CloudFormation template. Alternatively, you can <a href="https://aws-gcr-solutions.s3.cn-north-1.amazonaws.com.cn/data-transfer-hub/latest/DataTransferHub-openid.template">download the template</a> as a starting point for your own implementation. </p>
<p><a href="https://console.amazonaws.cn/cloudformation/home#/stacks/create/template?stackName=DataTransferHub&amp;templateURL=https://aws-gcr-solutions.s3.cn-north-1.amazonaws.com.cn/data-transfer-hub/latest/DataTransferHub-openid.template"><img alt="Launch Stack" src="../images/launch-stack.png" /></a></p>
</li>
<li>
<p>The template launches in your console’s default Region. To launch the solution in a different AWS Region, use the Region selector in the console navigation bar. </p>
</li>
<li>
<p>On the <strong>Create stack</strong> page, verify that the correct template URL is in the Amazon S3 URL text box and choose <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Specify stack details</strong> page, assign a name to your solution stack. For information about naming character limitations, refer to <a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-limits.html">IAM and STS Limits</a> in the <em>AWS Identity and Access Management User Guide</em>.</p>
</li>
<li>
<p>Under <strong>Parameters</strong>, review the parameters for this solution template and modify them as necessary. This solution uses the following default values.</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>OidcProvider</strong></td>
<td>&lt;Requires input></td>
<td>Refers to the Issuer shown in the OIDC application configuration.</td>
</tr>
<tr>
<td><strong>OidcClientId</strong></td>
<td>&lt;Requires input></td>
<td>Refers to the App ID shown in the OIDC application configuration.</td>
</tr>
<tr>
<td><strong>OidcCustomerDomain</strong></td>
<td>&lt;Requires input></td>
<td>Refers to the customer domain that has completed ICP registration in China, not the subdomain provided by Authing. <br> It must start with <code>https://</code>.</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Choose <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Configure Stack Options</strong> page, keep the default values and choose <strong>Next</strong>.</p>
</li>
<li>
<p>On the <strong>Review</strong> page, review and confirm the settings. Check the box acknowledging that the template will create AWS Identity and Access Management (IAM) resources.</p>
</li>
<li>
<p>Choose <strong>Create Stack</strong> to deploy the stack. </p>
</li>
</ol>
<p>You can view the <strong>status</strong> of your stack in the AWS CloudFormation console in the Status column. You should receive a <strong>CREATE_COMPLETE</strong> status in approximately 15 minutes.</p>
<h2 id="step-2-launch-the-web-console">Step 2. Launch the web console <a name="launch-web-console"></a></h2>
<p>After the stack is successfully created, navigate to the CloudFormation <strong>Outputs</strong> tab and select the <strong>PortalUrl</strong> value to access the Data Transfer Hub web console.</p>
<p>After successful deployment, an email containing the temporary login password will be sent to the email address provided.</p>
<p>Depending on the region where you start the stack, you can choose to access the web console from the AWS China Regions or the AWS Standard Regions.</p>
<ul>
<li><a href="#cognito">Log in with Amazon Cognito User Pool (for AWS Standard Regions)</a></li>
<li><a href="#openid">Log in with OpenID using Authing.cn (for AWS China Regions)</a></li>
</ul>
<h3 id="option-1-log-in-using-amazon-cognito-user-pool-for-aws-standard-regions">(Option 1) Log in using Amazon Cognito user pool for AWS Standard Regions <a name="cognito"></a></h3>
<ol>
<li>
<p>Using a web browser, enter the <strong>PortalURL</strong> from the CloudFormation <strong>Output</strong> tab, then navigate to the Amazon Cognito console. </p>
</li>
<li>
<p>Sign in with the <strong>AdminEmail</strong> and the temporary password.</p>
<ol>
<li>Set a new account password.</li>
<li>(Optional) Verify your email address for account recovery. </li>
</ol>
</li>
<li>After the verification is complete, the system opens the Data Transfer Hub web console.</li>
</ol>
<h3 id="option-2-openid-authentication-for-aws-china-regions">(Option 2) OpenID authentication for AWS China Regions <a name="openid"></a></h3>
<ol>
<li>Using a web browser, enter the Data Transfer Hub domain name. <ul>
<li>If you are logging in for the first time, the system will open the Authing.cn login interface. </li>
</ul>
</li>
<li>Enter the username and password you registered when you deployed the solution, then choose Login. The system opens the Data Transfer Hub web console.</li>
<li>Change your password and then sign in again. </li>
</ol>
<h2 id="step-3-create-a-transfer-task">Step 3. Create a transfer task <a name="create-task"></a></h2>
<p>Use the web console to create a transfer task for Amazon S3 or Amazon ECR. For more information, refer to <a href="../tutorial-s3/">Create Amazon S3 Transfer Task</a> and <a href="../tutorial-ecr/">Create Amazon ECR Transfer Task</a>.</p>
<p><img alt="dth-console" src="../images/dth-console.png" /></p>
<p>Figure 1: Data Transfer Hub web console</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../template/" class="md-footer__link md-footer__link--prev" aria-label="Previous: CloudFormation template" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              CloudFormation template
            </div>
          </div>
        </a>
      
      
        
        <a href="../tutorial-s3/" class="md-footer__link md-footer__link--next" aria-label="Next: Create Amazon S3 transfer task" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Create Amazon S3 transfer task
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["tabs", "search.suggest", "search.highlight"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.0bbba5b5.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.e1a181d9.min.js"></script>
      
    
  </body>
</html>